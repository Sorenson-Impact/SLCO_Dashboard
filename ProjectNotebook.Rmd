---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

```{r}
library(shiny)
library(plyr)
library(tidyverse)
library(googlesheets)
library(shinythemes)



# Define UI for application that draws a histogram
ui <- fluidPage(theme = shinytheme("slate"),
                
                # Application title
                titlePanel("Genentech Ride Finder"),
                
                # Sidebar with a slider input for number of bins 
                  # Show a plot of the generated distribution
                  mainPanel(
                    leafletOutput("map")
                  ))

# Define server logic required to draw a histogram
server <- function(input, output) {

}


# Run the application 
shinyApp(ui = ui, server = server)
```

```{r}
## example for google sheets
library(googlesheets)
library(plotly)



gap <- gs_title("Test Copy of REACH Data Request_Updated_2018")
myData <- gap %>%
  gs_read()
## Wrangling: 

#transpose the data to put observations into rows 
tData <- t(myData)

#make column names the names of the first row
colnames(tData) = tData[1, ] # assigns column names from the first row
tData = tData[-1, ] # removes the first row from the data 

#make the row names the names of the first column 
rownames(tData) <-tData[ ,1] # assigns column names from the first row
tData <-  tData[, -1] # removes the first row from the data 

# remove the 'totals' month
tData <- tData[-c(4, 8, 12, 16, 17), ]

#remove the 'header' columns 
tData <- tData[ ,-c(1, 11, 17, 30, 35, 43, 51, 61, 67, 73, 79, 86, 97) ]

xaxis <- rownames(tData)
xaxis
y2 <-  tData[,1]
y
View(xaxis)
 
### Plot Program Overview
## plot Number of individuals randomized into REACH this month via line graph
months <- factor(xaxis,levels = c("January", "February", "March",  "April",   "May",  "June", "July", "August",  "September", "October", "November",  "December"))

## Plot Program Overview: 
programOverviewPlot <- plot_ly(x = months, y = strtoi(tData[,1]), name = 'Randomized', type = 'scatter', mode = 'lines+markers')  %>%
  #Plot Number of individuals referred to REACH this month
  add_trace(y = strtoi(tData[,2]), name = 'Referred', mode = 'lines+markers') %>%
  #Plot Number of new clients enrolled in REACH this month
  add_trace(y = strtoi(tData[,3]), name = 'New Clients', mode = 'lines+markers') %>%
  #Plot Number of REACH clients actively receiving services
  add_trace(y = strtoi(tData[,4]), name = 'Receiving Services', mode = 'lines+markers') %>%
  #Plot Total number of individuals enrolled in REACH 
  add_trace(y = strtoi(tData[,5]), name = 'Total Enrolled', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,9]), name = 'Completed REACH', mode = 'lines+markers')%>%
      layout(yaxis = list(title = 'Number of Individuals'), xaxis = list(title = 'Month'))

programOverviewPlot

```

```{r}
# Client Information 
# Plot Client Information as Line Graph
agesLinePlot <- plot_ly(x = months, y = strtoi(tData[,11]), name = '18-25', type = 'scatter', mode = 'lines+markers')  %>%
  #Plot Number of individuals referred to REACH this month
  add_trace(y = strtoi(tData[,12]), name = '26-35', mode = 'lines+markers') %>%
  #Plot Number of new clients enrolled in REACH this month
  add_trace(y = strtoi(tData[,13]), name = '35-44', mode = 'lines+markers') %>%
  #Plot Number of REACH clients actively receiving services
  add_trace(y = strtoi(tData[,14]), name = '45+', mode = 'lines+markers')%>%
      layout(yaxis = list(title = 'Number of Individuals'), xaxis = list(title = 'Month'))

agesLinePlot

#Plot Race as Line Graph
raceLinePlot <- plot_ly(x = months, y = strtoi(tData[,15]), name = 'American Indian', type = 'scatter', mode = 'lines+markers')  %>%
  #Plot Number of individuals referred to REACH this month
  add_trace(y = strtoi(tData[,16]), name = 'Asian', mode = 'lines+markers') %>%
  #Plot Number of new clients enrolled in REACH this month
  add_trace(y = strtoi(tData[,17]), name = 'Black/African American', mode = 'lines+markers') %>%
  #Plot Number of REACH clients actively receiving services
  add_trace(y = strtoi(tData[,18]), name = 'Black/African American, White', mode = 'lines+markers')%>%
  add_trace(y = strtoi(tData[,19]), name = 'Pacific Islander', mode = 'lines+markers')%>%
  add_trace(y = strtoi(tData[,20]), name = 'Other single race', mode = 'lines+markers')%>%
  add_trace(y = strtoi(tData[,21]), name = 'Other two or more races', mode = 'lines+markers')%>%
  add_trace(y = strtoi(tData[,22]), name = 'White', mode = 'lines+markers')%>%
  add_trace(y = strtoi(tData[,23]), name = 'Mexican', mode = 'lines+markers')%>%
  add_trace(y = strtoi(tData[,24]), name = 'Not of Hispanic Origin', mode = 'lines+markers')%>%
  add_trace(y = strtoi(tData[,25]), name = 'Other Hispanic', mode = 'lines+markers')%>%
  add_trace(y = strtoi(tData[,26]), name = 'Puerto Rican', mode = 'lines+markers')%>%
      layout(yaxis = list(title = 'Number of Individuals'), xaxis = list(title = 'Month'))
raceLinePlot

```

```{r}
# Referrals and Randomization 
#bar code:
randomizedBarPlot <- plot_ly(x = months, y = strtoi(tData[,27]), type = 'bar', name = 'Randomized into REACH') %>%
     layout(yaxis = list(title = 'Number of Individuals Randomized to REACH'), xaxis = list(title = 'Month'))
randomizedBarPlot

betweenEnrollmentdBarPlot <- plot_ly(x = months, y = as.double(tData[,28]), type = 'bar', name = 'Randomized into REACH') %>%
     layout(yaxis = list(title = 'Avg. Days from Randomization to Enrollment'), xaxis = list(title = 'Month'))
betweenEnrollmentdBarPlot

contactsBetweenEnrollmentdBarPlot <- plot_ly(x = months, y = as.double(tData[,29]), type = 'bar', name = 'Randomized into REACH') %>%
     layout(yaxis = list(title = 'Avg. Contacts from Randomization to Enrollment'), xaxis = list(title = 'Month'))
contactsBetweenEnrollmentdBarPlot

assessmentsBarPlot <- plot_ly(x = months, y = strtoi(tData[,30]), type = 'bar', name = 'Randomized into REACH') %>%
     layout(yaxis = list(title = 'Assessments Conducted'), xaxis = list(title = 'Month'))
assessmentsBarPlot


```

```{r}
# Service Delivery
serviceDeliveryLinePlot <- plot_ly(x = months, y = strtoi(tData[,31]), name = 'Intensive Treatment', type = 'scatter', mode = 'lines+markers')  %>%
  add_trace(y = strtoi(tData[,32]), name = 'Transition', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,33]), name = 'Sustained Recovery', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,34]), name = 'Long-term Recovery', mode = 'lines+markers')%>%
  add_trace(y = strtoi(tData[,35]), name = '200 Hours of Therapy', mode = 'lines+markers')%>%
  add_trace(y = strtoi(tData[,37]), name = 'Completed MRT', mode = 'lines+markers')%>%
      layout(yaxis = list(title = 'Number of Individuals Receiving'), xaxis = list(title = 'Month'))

serviceDeliveryLinePlot



highestNeedBarPlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,36])), type = 'bar', name = 'Randomized into REACH') %>%
     layout(yaxis = list(title = '% of Time Spent On Highest Priority'), xaxis = list(title = 'Month'))
highestNeedBarPlot

```

```{r}
# Employment 
employmentLinePlot <- plot_ly(x = months, y = strtoi(tData[,38]), name = 'Completed Assessment', type = 'scatter', mode = 'lines+markers')  %>%
  add_trace(y = strtoi(tData[,39]), name = 'Obtained Employment ', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,40]), name = 'Engaged With REACH Employment', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,41]), name = 'Obtained a Job with DWS', mode = 'lines+markers')%>% #could error with ?
  add_trace(y = strtoi(tData[,42]), name = 'Engaged with Vocational Training', mode = 'lines+markers')%>%
  add_trace(y = strtoi(tData[,44]), name = 'Lost Their Job', mode = 'lines+markers')%>%
      layout(yaxis = list(title = 'Number of Individuals'), xaxis = list(title = 'Month'))

employmentLinePlot


employmentBarPlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,43])), type = 'bar', name = 'REACH Clients') %>%
     layout(yaxis = list(title = '% of REACH Clients Employeed'), xaxis = list(title = 'Month'))
employmentBarPlot
```

```{r}
housingResidentLinePlot <- plot_ly(x = months, y = strtoi(tData[,45]), name = 'Completed Housing Assessments', type = 'scatter', mode = 'lines+markers')  %>%
  add_trace(y = strtoi(tData[,46]), name = 'In Need of Residence', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,47]), name = 'Placed in REACH Recovery Residence', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,48]), name = 'Currently Housed in REACH Recovery', mode = 'lines+markers')%>% #could error with ?
  add_trace(y = strtoi(tData[,50]), name = 'Unique Clients served in REACH Recovery', mode = 'lines+markers')%>%
      layout(yaxis = list(title = 'Number of Clients'), xaxis = list(title = 'Month'))

housingResidentLinePlot

housingCapacityLinePlot <- plot_ly(x = months, y = strtoi(tData[,49]), name = 'Average Length of Stay', type = 'scatter', mode = 'lines+markers')  %>%
  add_trace(y = strtoi(tData[,51]), name = 'Beds Available', mode = 'lines+markers') %>%
      layout(yaxis = list(title = 'Number'), xaxis = list(title = 'Month'))

housingCapacityLinePlot

bedDaysLinePlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,52])), name = 'In Residence', type = 'scatter', mode = 'lines+markers')  %>%
  add_trace(y = as.numeric(sub("%", "", tData[,53])), name = 'By Transitional', mode = 'lines+markers') %>%
      layout(yaxis = list(title = '% of Bed Days Filled'), xaxis = list(title = 'Month'))
bedDaysLinePlot

```

```{r}
# SUD treatment 
SUDLinePlot <- plot_ly(x = months, y = strtoi(tData[,54]), name = 'SUD', type = 'scatter', mode = 'lines+markers')  %>%
  add_trace(y = strtoi(tData[,55]), name = 'UA', mode = 'lines+markers') %>%
      layout(yaxis = list(title = 'Number Completed'), xaxis = list(title = 'Month'))
SUDLinePlot

UASLinePlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,56])), name = 'Positive', type = 'scatter', mode = 'lines+markers')  %>%
  add_trace(y = as.numeric(sub("%", "", tData[,57])), name = 'No-show', mode = 'lines+markers') %>%
      layout(yaxis = list(title = 'Percent (%)'), xaxis = list(title = 'Month'))
UASLinePlot

SUDBarPlot <- plot_ly(x = months, y = as.double(sub("%", "", tData[,58]))/100, type = 'bar', name = 'REACH Clients') %>% #divide by 100 as hours are entered as a percentage
     layout(yaxis = list(title = 'Average Number of Hours Per Client'), xaxis = list(title = 'Month'))
SUDBarPlot


```

```{r}
# Recidivism 
engagementsLinePlot <- plot_ly(x = months, y = strtoi(tData[,59]), name = 'Post-Incarceration Re-engagements', type = 'scatter', mode = 'lines+markers')  %>%
  add_trace(y = strtoi(tData[,55]), name = 'Successful Re-engagements', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,55]), name = 'Left Unsuccessfully', mode = 'lines+markers') %>%
      layout(yaxis = list(title = 'Number Completed'), xaxis = list(title = 'Month'))
engagementsLinePlot

engagementsMethodsLinePlot <- plot_ly(x = months, y = as.double(tData[,60]), name = 'Avg. Days Between Jail and Re-enrollment', type = 'scatter', mode = 'lines+markers')  %>%
  add_trace(y = as.double(tData[,61]), name = 'Contact Attempts', mode = 'lines+markers') %>%
      layout(yaxis = list(title = 'Number '), xaxis = list(title = 'Month'))
engagementsMethodsLinePlot

```
```{r}
#Staffing 
staffingLinePlot <- plot_ly(x = months, y = strtoi(tData[,64]), name = 'Case Managers', type = 'scatter', mode = 'lines+markers')  %>%
  add_trace(y = strtoi(tData[,65]), name = 'Mentors', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,66]), name = 'Program Managers', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,67]), name = 'Admission Coordinators', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,68]), name = 'Therapists', mode = 'lines+markers') %>%
      layout(yaxis = list(title = 'Number on Staff'), xaxis = list(title = 'Month'))
staffingLinePlot

```

```{r}
#Fidelity 
fidelityScoreLinePlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,69])), name = 'Staff Trained In Modalities', type = 'scatter', mode = 'lines+markers')  %>%
  add_trace(y = as.numeric(sub("%", "", tData[,70])), name = 'MRI groups with Supervision', mode = 'lines+markers') %>%
  add_trace(y = as.numeric(sub("%", "", tData[,71])), name = 'Clinicians receiving Fidelity Checks', mode = 'lines+markers') %>%
  add_trace(y = as.numeric(sub("%", "", tData[,72])), name = 'Fidelity Score for MRT', mode = 'lines+markers') %>%
  add_trace(y = as.numeric(sub("%", "", tData[,73])), name = 'Fidelity Score for MI', mode = 'lines+markers') %>%
  add_trace(y = as.numeric(sub("%", "", tData[,74])), name = 'Fidelity Score for TA', mode = 'lines+markers') %>%
      layout(yaxis = list(title = 'Percent (%)'), xaxis = list(title = 'Month'))

fidelityScoreLinePlot
```

```{r}
#Exits 
exitLinePlot <- plot_ly(x = months, y = strtoi(tData[,75]), name = 'Total Unplanned Exits', type = 'scatter', mode = 'lines+markers')  %>%
  add_trace(y = strtoi(tData[,76]), name = 'Jail', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,77]), name = 'Prison', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,78]), name = 'Self Termination', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,79]), name = 'No Contact', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,80]), name = 'Total Terminated by FSH', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,81]), name = 'Deceased', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,82]), name = 'Transfered Programs', mode = 'lines+markers') %>%
  add_trace(y = strtoi(tData[,84]), name = 'Planned Exits', mode = 'lines+markers') %>%
      layout(yaxis = list(title = 'Number of Clients that Exitted'), xaxis = list(title = 'Month'))
exitLinePlot

exitAttritionLinePlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,83])), name = 'Attrition', type = 'scatter', mode = 'lines+markers')  %>%
      layout(yaxis = list(title = 'Percent (%)'), xaxis = list(title = 'Month'))
exitAttritionLinePlot
```
```{r}
#Finances
financesLinePlot <- plot_ly(x = months, y = as.double(tData[,85]), name = 'Finances', type = 'scatter', mode = 'lines+markers')  %>%
      layout(yaxis = list(title = 'Dollars ($)'), xaxis = list(title = 'Month'))
financesLinePlot

```

```{r}
library(shiny)
library(plyr)
library(tidyverse)
library(googlesheets)
library(shinythemes)
library(plotly)


# Define UI for application that draws a histogram
ui <- fluidPage(theme = shinytheme("paper"),
                
                # Application title
                titlePanel("Sorenson SLCO"),
                
                # Sidebar with a slider input for number of bins 
                  # Show a plot of the generated distribution
                h3("Program Overview"),

                plotlyOutput("programOverviewPlot"),
                h3("Client Information"),
                h4("Age"),
                plotlyOutput("agesLinePlot"),
                h4("Race/Ethnicity"),
                plotlyOutput("raceLinePlot"),
                
                h3("Referrals and Randomization"),
                h4("Randomized into REACH from jail"),
                plotlyOutput("randomizedBarPlot"),
                h4("Days between randomization and enrollment"),
                plotlyOutput("betweenEnrollmentdBarPlot"),
                h4("Contacts between randomization and enrollment"),
                plotlyOutput("contactsBetweenEnrollmentdBarPlot"),
                h4("Number of REACH assessments conducted"),
                plotlyOutput("assessmentsBarPlot"),
                
                h3("Service Delivery"),
                h4("Number of Clients by Delivery Type"),
                plotlyOutput("serviceDeliveryLinePlot"),
                h4("Time spent on highest needs of client"),
                plotlyOutput("highestNeedBarPlot"), 
                
                h3("Employment"),
                h4("Engagement Numbers"),
                plotlyOutput("employmentLinePlot"), 
                h4("Total percent of employment"),
                plotlyOutput("employmentBarPlot"), 
                
                h3("Housing"),
                h4("Client Numbers"),
                plotlyOutput("housingResidentLinePlot"), 
                h4("Capacity Numbers"),
                plotlyOutput("housingCapacityLinePlot"), 
                h4("Bed Days Filled"),
                plotlyOutput("bedDaysLinePlot"), 
                
                h3("SUD Treatment"),
                h4("SUD and UAs Numbers"),
                plotlyOutput("SUDLinePlot"), 
                h4("UAS Breakdown"),
                plotlyOutput("UASLinePlot"), 
                h4("SUD hourly breakdown"),
                plotlyOutput("SUDBarPlot"), 
                
                h3("Recidivism"),
                h4("Engagements Number"),
                plotlyOutput("engagementsLinePlot"), 
                h4("Contacts to disengaged individuals"),
                plotlyOutput("engagementsMethodsLinePlot"), 
                
                h3("Staffing"),
                plotlyOutput("staffingLinePlot"), 
                
                h3("Fidelity and Training"),
                plotlyOutput("fidelityScoreLinePlot"), 
                
                h3("Exits"),
                h4("Number of exits"),
                plotlyOutput("exitLinePlot"),
                h4("Overall attrition"),
                plotlyOutput("exitAttritionLinePlot"), 
                
                h3("Financial"),
                plotlyOutput("financesLinePlot"))

# Define server logic required to draw a histogram
server <- function(input, output) {

  
  
  
  gap <- gs_title("Test Copy of REACH Data Request_Updated_2018")
  myData <- gap %>%
    gs_read()
  
  #myData <- read.csv("Test Copy of REACH Data Request_Updated_2018 - Sheet1.csv")
  ## Wrangling: 
  
  #transpose the data to put observations into rows 
  tData <- t(myData)
  
  #make column names the names of the first row
  colnames(tData) = tData[1, ] # assigns column names from the first row
  tData = tData[-1, ] # removes the first row from the data 
  
  #make the row names the names of the first column 
  rownames(tData) <-tData[ ,1] # assigns column names from the first row
  tData <-  tData[, -1] # removes the first row from the data 
  
  # remove the 'totals' month
  tData <- tData[-c(4, 8, 12, 16, 17), ]
  
  #remove the 'header' columns 
  tData <- tData[ ,-c(1, 11, 17, 30, 35, 43, 51, 61, 67, 73, 79, 86, 97) ]
  
  xaxis <- rownames(tData)
  y2 <-  tData[,1]


  ### Plot Program Overview
  ## plot Number of individuals randomized into REACH this month via line graph
  months <- factor(xaxis,levels = c("January", "February", "March",  "April",   "May",  "June", "July", "August",  "September", "October", "November",  "December"))
  
  ## Plot Program Overview: 
  output$programOverviewPlot <- renderPlotly({programOverviewPlot <- plot_ly(x = months, y = strtoi(tData[,1]), name = 'Randomized', type = 'scatter', mode = 'lines+markers')  %>%
    #Plot Number of individuals referred to REACH this month
    add_trace(y = strtoi(tData[,2]), name = 'Referred', mode = 'lines+markers') %>%
    #Plot Number of new clients enrolled in REACH this month
    add_trace(y = strtoi(tData[,3]), name = 'New Clients', mode = 'lines+markers') %>%
    #Plot Number of REACH clients actively receiving services
    add_trace(y = strtoi(tData[,4]), name = 'Receiving Services', mode = 'lines+markers') %>%
    #Plot Total number of individuals enrolled in REACH 
    add_trace(y = strtoi(tData[,5]), name = 'Total Enrolled', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,9]), name = 'Completed REACH', mode = 'lines+markers')%>%
    layout(yaxis = list(title = 'Number of Individuals'), xaxis = list(title = 'Month'))
  })
  
  
  
  # Client Information 
  # Plot Client Information as Line Graph
  output$agesLinePlot <- renderPlotly({agesLinePlot <- plot_ly(x = months, y = strtoi(tData[,11]), name = '18-25', type = 'scatter', mode = 'lines+markers')  %>%
    #Plot Number of individuals referred to REACH this month
    add_trace(y = strtoi(tData[,12]), name = '26-35', mode = 'lines+markers') %>%
    #Plot Number of new clients enrolled in REACH this month
    add_trace(y = strtoi(tData[,13]), name = '35-44', mode = 'lines+markers') %>%
    #Plot Number of REACH clients actively receiving services
    add_trace(y = strtoi(tData[,14]), name = '45+', mode = 'lines+markers')%>%
    layout(yaxis = list(title = 'Number of Individuals'), xaxis = list(title = 'Month'))
  })
  

  #Plot Race as Line Graph
  output$raceLinePlot <- renderPlotly({ raceLinePlot <- plot_ly(x = months, y = strtoi(tData[,15]), name = 'American Indian', type = 'scatter', mode = 'lines+markers')  %>%
    #Plot Number of individuals referred to REACH this month
    add_trace(y = strtoi(tData[,16]), name = 'Asian', mode = 'lines+markers') %>%
    #Plot Number of new clients enrolled in REACH this month
    add_trace(y = strtoi(tData[,17]), name = 'Black/African American', mode = 'lines+markers') %>%
    #Plot Number of REACH clients actively receiving services
    add_trace(y = strtoi(tData[,18]), name = 'Black/African American, White', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,19]), name = 'Pacific Islander', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,20]), name = 'Other single race', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,21]), name = 'Other two or more races', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,22]), name = 'White', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,23]), name = 'Mexican', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,24]), name = 'Not of Hispanic Origin', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,25]), name = 'Other Hispanic', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,26]), name = 'Puerto Rican', mode = 'lines+markers')%>%
    layout(yaxis = list(title = 'Number of Individuals'), xaxis = list(title = 'Month'))
  })
  
    # Referrals and Randomization 
  #bar code:
  output$randomizedBarPlot <- renderPlotly({randomizedBarPlot <- plot_ly(x = months, y = strtoi(tData[,27]), type = 'bar', name = 'Randomized into REACH') %>%
    layout(yaxis = list(title = 'Number of Individuals Randomized to REACH'), xaxis = list(title = 'Month'))
  })
  
  output$betweenEnrollmentdBarPlot <- renderPlotly({betweenEnrollmentdBarPlot <- plot_ly(x = months, y = as.double(tData[,28]), type = 'bar', name = 'Randomized into REACH') %>%
    layout(yaxis = list(title = 'Avg. Days from Randomization to Enrollment'), xaxis = list(title = 'Month'))
  })
  
  output$contactsBetweenEnrollmentdBarPlot <- renderPlotly({contactsBetweenEnrollmentdBarPlot <- plot_ly(x = months, y = as.double(tData[,29]), type = 'bar', name = 'Randomized into REACH') %>%
    layout(yaxis = list(title = 'Avg. Contacts from Randomization to Enrollment'), xaxis = list(title = 'Month'))
  })
      output$assessmentsBarPlot <- renderPlotly({assessmentsBarPlot <- plot_ly(x = months, y = strtoi(tData[,30]), type = 'bar', name = 'Randomized into REACH') %>%
    layout(yaxis = list(title = 'Assessments Conducted'), xaxis = list(title = 'Month'))
  })
  
  ######
  
  # Service Delivery
  output$serviceDeliveryLinePlot <- renderPlotly({serviceDeliveryLinePlot <- plot_ly(x = months, y = strtoi(tData[,31]), name = 'Intensive Treatment', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,32]), name = 'Transition', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,33]), name = 'Sustained Recovery', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,34]), name = 'Long-term Recovery', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,35]), name = '200 Hours of Therapy', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,37]), name = 'Completed MRT', mode = 'lines+markers')%>%
    layout(yaxis = list(title = 'Number of Individuals Receiving'), xaxis = list(title = 'Month'))
  })
  

  
  
  output$highestNeedBarPlot <- renderPlotly({ highestNeedBarPlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,36])), type = 'bar', name = 'Randomized into REACH') %>%
    layout(yaxis = list(title = '% of Time Spent On Highest Priority'), xaxis = list(title = 'Month'))
  })
  

  
  
  
  # Employment 
  output$employmentLinePlot <- renderPlotly({employmentLinePlot <- plot_ly(x = months, y = strtoi(tData[,38]), name = 'Completed Assessment', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,39]), name = 'Obtained Employment ', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,40]), name = 'Engaged With REACH Employment', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,41]), name = 'Obtained a Job with DWS', mode = 'lines+markers')%>% #could error with ?
    add_trace(y = strtoi(tData[,42]), name = 'Engaged with Vocational Training', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,44]), name = 'Lost Their Job', mode = 'lines+markers')%>%
    layout(yaxis = list(title = 'Number of Individuals'), xaxis = list(title = 'Month'))
  })

  
  output$employmentBarPlot <- renderPlotly({employmentBarPlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,43])), type = 'bar', name = 'REACH Clients') %>%
    layout(yaxis = list(title = '% of REACH Clients Employeed'), xaxis = list(title = 'Month'))
  })

  
  
  output$housingResidentLinePlot <- renderPlotly({housingResidentLinePlot <- plot_ly(x = months, y = strtoi(tData[,45]), name = 'Completed Housing Assessments', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,46]), name = 'In Need of Residence', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,47]), name = 'Placed in REACH Recovery Residence', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,48]), name = 'Currently Housed in REACH Recovery', mode = 'lines+markers')%>% #could error with ?
    add_trace(y = strtoi(tData[,50]), name = 'Unique Clients served in REACH Recovery', mode = 'lines+markers')%>%
    layout(yaxis = list(title = 'Number of Clients'), xaxis = list(title = 'Month'))
  })
  

  output$housingCapacityLinePlot <- renderPlotly({ housingCapacityLinePlot <- plot_ly(x = months, y = strtoi(tData[,49]), name = 'Average Length of Stay', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,51]), name = 'Beds Available', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Number'), xaxis = list(title = 'Month'))
  })
  

  output$bedDaysLinePlot <- renderPlotly({bedDaysLinePlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,52])), name = 'In Residence', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = as.numeric(sub("%", "", tData[,53])), name = 'By Transitional', mode = 'lines+markers') %>%
    layout(yaxis = list(title = '% of Bed Days Filled'), xaxis = list(title = 'Month'))
  })

  
  
  
  # SUD treatment
  output$SUDLinePlot <- renderPlotly({ SUDLinePlot <- plot_ly(x = months, y = strtoi(tData[,54]), name = 'SUD', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,55]), name = 'UA', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Number Completed'), xaxis = list(title = 'Month'))
  })

  output$UASLinePlot <- renderPlotly({UASLinePlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,56])), name = 'Positive', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = as.numeric(sub("%", "", tData[,57])), name = 'No-show', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Percent (%)'), xaxis = list(title = 'Month'))
  })

  output$SUDBarPlot <- renderPlotly({SUDBarPlot <- plot_ly(x = months, y = as.double(sub("%", "", tData[,58]))/100, type = 'bar', name = 'REACH Clients') %>% #divide by 100 as hours are entered as a percentage
    layout(yaxis = list(title = 'Average Number of Hours Per Client'), xaxis = list(title = 'Month'))
  })

  
  
  
  
  # Recidivism 
  output$engagementsLinePlot <- renderPlotly({engagementsLinePlot <- plot_ly(x = months, y = strtoi(tData[,59]), name = 'Post-Incarceration Re-engagements', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,55]), name = 'Successful Re-engagements', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,55]), name = 'Left Unsuccessfully', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Number Completed'), xaxis = list(title = 'Month'))
  })

  output$engagementsMethodsLinePlot <- renderPlotly({engagementsMethodsLinePlot <- plot_ly(x = months, y = as.double(tData[,60]), name = 'Avg. Days Between Jail and Re-enrollment', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = as.double(tData[,61]), name = 'Contact Attempts', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Number '), xaxis = list(title = 'Month'))
  })

  
  
  #Staffing 
  output$staffingLinePlot <- renderPlotly({staffingLinePlot <- plot_ly(x = months, y = strtoi(tData[,64]), name = 'Case Managers', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,65]), name = 'Mentors', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,66]), name = 'Program Managers', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,67]), name = 'Admission Coordinators', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,68]), name = 'Therapists', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Number on Staff'), xaxis = list(title = 'Month'))
  })

  
  
  
  #Fidelity 
  output$fidelityScoreLinePlot <- renderPlotly({fidelityScoreLinePlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,69])), name = 'Staff Trained In Modalities', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = as.numeric(sub("%", "", tData[,70])), name = 'MRI groups with Supervision', mode = 'lines+markers') %>%
    add_trace(y = as.numeric(sub("%", "", tData[,71])), name = 'Clinicians receiving Fidelity Checks', mode = 'lines+markers') %>%
    add_trace(y = as.numeric(sub("%", "", tData[,72])), name = 'Fidelity Score for MRT', mode = 'lines+markers') %>%
    add_trace(y = as.numeric(sub("%", "", tData[,73])), name = 'Fidelity Score for MI', mode = 'lines+markers') %>%
    add_trace(y = as.numeric(sub("%", "", tData[,74])), name = 'Fidelity Score for TA', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Percent (%)'), xaxis = list(title = 'Month'))
  })
  

  
  
  #Exits 
  output$exitLinePlot <- renderPlotly({exitLinePlot <- plot_ly(x = months, y = strtoi(tData[,75]), name = 'Total Unplanned Exits', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,76]), name = 'Jail', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,77]), name = 'Prison', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,78]), name = 'Self Termination', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,79]), name = 'No Contact', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,80]), name = 'Total Terminated by FSH', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,81]), name = 'Deceased', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,82]), name = 'Transfered Programs', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,84]), name = 'Planned Exits', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Number of Clients that Exitted'), xaxis = list(title = 'Month'))
  })

  output$exitAttritionLinePlot <- renderPlotly({exitAttritionLinePlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,83])), name = 'Attrition', type = 'scatter', mode = 'lines+markers')  %>%
    layout(yaxis = list(title = 'Percent (%)'), xaxis = list(title = 'Month'))
  })

  
  #Finances
  output$financesLinePlot <- renderPlotly({financesLinePlot <- plot_ly(x = months, y = as.double(tData[,85]), name = 'Finances', type = 'scatter', mode = 'lines+markers')  %>%
    layout(yaxis = list(title = 'Dollars ($)'), xaxis = list(title = 'Month'))
  })
}
# Run the application 
shinyApp(ui = ui, server = server)
```
  

  
  

  
  
  contactsBetweenEnrollmentdBarPlot
  
  
  assessmentsBarPlot
  
    output$assessmentsBarPlot <- renderPlotly({assessmentsBarPlot <- plot_ly(x = months, y = strtoi(tData[,30]), type = 'bar', name = 'Randomized into REACH') %>%
    layout(yaxis = list(title = 'Assessments Conducted'), xaxis = list(title = 'Month'))
  })
  
  ######
  
  # Service Delivery
  output$serviceDeliveryLinePlot <- renderPlotly({serviceDeliveryLinePlot <- plot_ly(x = months, y = strtoi(tData[,31]), name = 'Intensive Treatment', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,32]), name = 'Transition', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,33]), name = 'Sustained Recovery', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,34]), name = 'Long-term Recovery', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,35]), name = '200 Hours of Therapy', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,37]), name = 'Completed MRT', mode = 'lines+markers')%>%
    layout(yaxis = list(title = 'Number of Individuals Receiving'), xaxis = list(title = 'Month'))
  })
  
  serviceDeliveryLinePlot
  
  
  
  output$highestNeedBarPlot <- renderPlotly({ highestNeedBarPlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,36])), type = 'bar', name = 'Randomized into REACH') %>%
    layout(yaxis = list(title = '% of Time Spent On Highest Priority'), xaxis = list(title = 'Month'))
  })
  
  highestNeedBarPlot
  
  
  
  
  # Employment 
  output$employmentLinePlot <- renderPlotly({employmentLinePlot <- plot_ly(x = months, y = strtoi(tData[,38]), name = 'Completed Assessment', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,39]), name = 'Obtained Employment ', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,40]), name = 'Engaged With REACH Employment', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,41]), name = 'Obtained a Job with DWS', mode = 'lines+markers')%>% #could error with ?
    add_trace(y = strtoi(tData[,42]), name = 'Engaged with Vocational Training', mode = 'lines+markers')%>%
    add_trace(y = strtoi(tData[,44]), name = 'Lost Their Job', mode = 'lines+markers')%>%
    layout(yaxis = list(title = 'Number of Individuals'), xaxis = list(title = 'Month'))
  })
  employmentLinePlot
  
  
  output$employmentBarPlot <- renderPlotly({employmentBarPlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,43])), type = 'bar', name = 'REACH Clients') %>%
    layout(yaxis = list(title = '% of REACH Clients Employeed'), xaxis = list(title = 'Month'))
  })
  employmentBarPlot
  
  
  
  output$housingResidentLinePlot <- renderPlotly({housingResidentLinePlot <- plot_ly(x = months, y = strtoi(tData[,45]), name = 'Completed Housing Assessments', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,46]), name = 'In Need of Residence', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,47]), name = 'Placed in REACH Recovery Residence', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,48]), name = 'Currently Housed in REACH Recovery', mode = 'lines+markers')%>% #could error with ?
    add_trace(y = strtoi(tData[,50]), name = 'Unique Clients served in REACH Recovery', mode = 'lines+markers')%>%
    layout(yaxis = list(title = 'Number of Clients'), xaxis = list(title = 'Month'))
  })
  
  housingResidentLinePlot
  
  output$housingCapacityLinePlot <- renderPlotly({ housingCapacityLinePlot <- plot_ly(x = months, y = strtoi(tData[,49]), name = 'Average Length of Stay', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,51]), name = 'Beds Available', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Number'), xaxis = list(title = 'Month'))
  })
  
  housingCapacityLinePlot
  
  output$bedDaysLinePlot <- renderPlotly({bedDaysLinePlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,52])), name = 'In Residence', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = as.numeric(sub("%", "", tData[,53])), name = 'By Transitional', mode = 'lines+markers') %>%
    layout(yaxis = list(title = '% of Bed Days Filled'), xaxis = list(title = 'Month'))
  })
  bedDaysLinePlot
  
  
  
  
  # SUD treatment
  output$SUDLinePlot <- renderPlotly({ SUDLinePlot <- plot_ly(x = months, y = strtoi(tData[,54]), name = 'SUD', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,55]), name = 'UA', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Number Completed'), xaxis = list(title = 'Month'))
  })
  SUDLinePlot
  
  output$UASLinePlot <- renderPlotly({UASLinePlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,56])), name = 'Positive', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = as.numeric(sub("%", "", tData[,57])), name = 'No-show', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Percent (%)'), xaxis = list(title = 'Month'))
  })
  UASLinePlot
  
  output$SUDBarPlot <- renderPlotly({SUDBarPlot <- plot_ly(x = months, y = as.double(sub("%", "", tData[,58]))/100, type = 'bar', name = 'REACH Clients') %>% #divide by 100 as hours are entered as a percentage
    layout(yaxis = list(title = 'Average Number of Hours Per Client'), xaxis = list(title = 'Month'))
  })
  SUDBarPlot
  
  
  
  
  
  # Recidivism 
  output$engagementsLinePlot <- renderPlotly({engagementsLinePlot <- plot_ly(x = months, y = strtoi(tData[,59]), name = 'Post-Incarceration Re-engagements', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,55]), name = 'Successful Re-engagements', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,55]), name = 'Left Unsuccessfully', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Number Completed'), xaxis = list(title = 'Month'))
  })
  engagementsLinePlot
  
  output$engagementsMethodsLinePlot <- renderPlotly({engagementsMethodsLinePlot <- plot_ly(x = months, y = as.double(tData[,60]), name = 'Avg. Days Between Jail and Re-enrollment', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = as.double(tData[,61]), name = 'Contact Attempts', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Number '), xaxis = list(title = 'Month'))
  })
  engagementsMethodsLinePlot
  
  
  
  #Staffing 
  output$staffingLinePlot <- renderPlotly({staffingLinePlot <- plot_ly(x = months, y = strtoi(tData[,64]), name = 'Case Managers', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,65]), name = 'Mentors', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,66]), name = 'Program Managers', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,67]), name = 'Admission Coordinators', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,68]), name = 'Therapists', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Number on Staff'), xaxis = list(title = 'Month'))
  })
  staffingLinePlot
  
  
  
  
  #Fidelity 
  output$fidelityScoreLinePlot <- renderPlotly({fidelityScoreLinePlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,69])), name = 'Staff Trained In Modalities', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = as.numeric(sub("%", "", tData[,70])), name = 'MRI groups with Supervision', mode = 'lines+markers') %>%
    add_trace(y = as.numeric(sub("%", "", tData[,71])), name = 'Clinicians receiving Fidelity Checks', mode = 'lines+markers') %>%
    add_trace(y = as.numeric(sub("%", "", tData[,72])), name = 'Fidelity Score for MRT', mode = 'lines+markers') %>%
    add_trace(y = as.numeric(sub("%", "", tData[,73])), name = 'Fidelity Score for MI', mode = 'lines+markers') %>%
    add_trace(y = as.numeric(sub("%", "", tData[,74])), name = 'Fidelity Score for TA', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Percent (%)'), xaxis = list(title = 'Month'))
  })
  
  fidelityScoreLinePlot
  
  
  
  #Exits 
  output$exitLinePlot <- renderPlotly({exitLinePlot <- plot_ly(x = months, y = strtoi(tData[,75]), name = 'Total Unplanned Exits', type = 'scatter', mode = 'lines+markers')  %>%
    add_trace(y = strtoi(tData[,76]), name = 'Jail', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,77]), name = 'Prison', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,78]), name = 'Self Termination', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,79]), name = 'No Contact', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,80]), name = 'Total Terminated by FSH', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,81]), name = 'Deceased', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,82]), name = 'Transfered Programs', mode = 'lines+markers') %>%
    add_trace(y = strtoi(tData[,84]), name = 'Planned Exits', mode = 'lines+markers') %>%
    layout(yaxis = list(title = 'Number of Clients that Exitted'), xaxis = list(title = 'Month'))
  })
  exitLinePlot
  
  output$randomizedBarPlot <- renderPlotly({exitAttritionLinePlot <- plot_ly(x = months, y = as.numeric(sub("%", "", tData[,83])), name = 'Attrition', type = 'scatter', mode = 'lines+markers')  %>%
    layout(yaxis = list(title = 'Percent (%)'), xaxis = list(title = 'Month'))
  })
  exitAttritionLinePlot
  
  
  #Finances
  output$financesLinePlot <- renderPlotly({financesLinePlot <- plot_ly(x = months, y = as.double(tData[,85]), name = 'Finances', type = 'scatter', mode = 'lines+markers')  %>%
    layout(yaxis = list(title = 'Dollars ($)'), xaxis = list(title = 'Month'))
  })
  financesLinePlot
}


# Run the application 
shinyApp(ui = ui, server = server)


```{r}
  #myData <- gap %>%
  #  gs_read()
  
  myData <- read.csv("Test Copy of REACH Data Request_Updated_2018 - Sheet1.csv")
  ## Wrangling: 
  
  #transpose the data to put observations into rows 
  tData <- t(myData)
  
  #make column names the names of the first row
  colnames(tData) = tData[1, ] # assigns column names from the first row
  tData = tData[-1, ] # removes the first row from the data 
  
  #make the row names the names of the first column 
  rownames(tData) <-tData[ ,1] # assigns column names from the first row
  tData <-  tData[, -1] # removes the first row from the data 
  
  # remove the 'totals' month
  tData <- tData[-c(4, 8, 12, 16, 17), ]
  
  #remove the 'header' columns 
  tData <- tData[ ,-c(1, 11, 17, 30, 35, 43, 51, 61, 67, 73, 79, 86, 97) ]
  
  xaxis <- rownames(tData)
  y2 <-  tData[,1]


  ### Plot Program Overview
  ## plot Number of individuals randomized into REACH this month via line graph
  months <- factor(xaxis,levels = c("January", "February", "March",  "April",   "May",  "June", "July", "August",  "September", "October", "November",  "December"))
```


```{r}
## example for google sheets
library(googlesheets)
gs_gap() %>% 
  gs_copy(to = "Gapminder")

gs_ls("Gapminder")

gap <- gs_title("Gapminder")
myData <- gap %>%
  gs_read(ws = "Oceania")
myData

```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).
